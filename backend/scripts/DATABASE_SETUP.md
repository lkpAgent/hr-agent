# HR Agent æ•°æ®åº“åˆå§‹åŒ–æŒ‡å—

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åˆå§‹åŒ– HR Agent æ•°æ®åº“å¹¶åˆ›å»ºç®¡ç†å‘˜è´¦å·ã€‚

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†è¯´æ˜](#è¯¦ç»†è¯´æ˜)
- [è„šæœ¬è¯´æ˜](#è„šæœ¬è¯´æ˜)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®Œæ•´æ•°æ®åº“åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# è¿è¡Œå®Œæ•´åˆå§‹åŒ–ï¼ˆåŒ…å«æ•°æ®åº“åˆ›å»ºã€è¡¨ç»“æ„ã€ç®¡ç†å‘˜è´¦å·ï¼‰
python scripts/init_database.py init
```

é»˜è®¤ç®¡ç†å‘˜è´¦å·ä¿¡æ¯ï¼š
- **ç”¨æˆ·å**: `admin`
- **é‚®ç®±**: `admin@hr-agent.com`
- **å¯†ç **: `admin123`

### 2. è‡ªå®šä¹‰ç®¡ç†å‘˜è´¦å·åˆå§‹åŒ–

```bash
# ä½¿ç”¨è‡ªå®šä¹‰ç®¡ç†å‘˜ä¿¡æ¯åˆå§‹åŒ–
python scripts/init_database.py init-custom your-email@company.com your-password your-username
```

## ğŸ“– è¯¦ç»†è¯´æ˜

### æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ (`init_database.py`)

è¿™ä¸ªè„šæœ¬æä¾›å®Œæ•´çš„æ•°æ®åº“åˆå§‹åŒ–åŠŸèƒ½ï¼š

#### å¯ç”¨å‘½ä»¤ï¼š

```bash
# 1. æ ‡å‡†åˆå§‹åŒ–
python scripts/init_database.py init

# 2. è‡ªå®šä¹‰åˆå§‹åŒ–
python scripts/init_database.py init-custom <email> <password> [username]

# 3. é‡ç½®æ•°æ®åº“ï¼ˆåˆ é™¤å¹¶é‡æ–°åˆ›å»ºï¼‰
python scripts/init_database.py reset

# 4. ä»…åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆæ•°æ®åº“å¿…é¡»å·²å­˜åœ¨ï¼‰
python scripts/init_database.py admin-only
```

#### åˆå§‹åŒ–è¿‡ç¨‹åŒ…æ‹¬ï¼š

1. âœ… åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. âœ… å®‰è£…å¿…è¦çš„ PostgreSQL æ‰©å±•ï¼ˆuuid-ossp, vectorï¼‰
3. âœ… åˆ›å»ºæ‰€æœ‰æ•°æ®è¡¨
4. âœ… åˆ›å»ºç®¡ç†å‘˜è´¦å·
5. âœ… åˆ›å»ºç¤ºä¾‹çŸ¥è¯†åº“å’ŒFAQï¼ˆå¯é€‰ï¼‰

### ç®¡ç†å‘˜è´¦å·ç®¡ç†è„šæœ¬ (`create_admin.py`)

ä¸“é—¨ç”¨äºç®¡ç†å‘˜è´¦å·çš„åˆ›å»ºå’Œç®¡ç†ï¼š

#### å¯ç”¨å‘½ä»¤ï¼š

```bash
# 1. äº¤äº’å¼åˆ›å»ºç®¡ç†å‘˜
python scripts/create_admin.py create

# 2. å¿«é€Ÿåˆ›å»ºé»˜è®¤ç®¡ç†å‘˜
python scripts/create_admin.py create-quick

# 3. æŒ‡å®šå‚æ•°åˆ›å»ºç®¡ç†å‘˜
python scripts/create_admin.py create-custom <username> <email> <password> <full_name>

# 4. åˆ—å‡ºæ‰€æœ‰ç®¡ç†å‘˜
python scripts/create_admin.py list

# 5. ä¿®æ”¹ç”¨æˆ·å¯†ç 
python scripts/create_admin.py change-password <username>

# 6. æå‡ç”¨æˆ·ä¸ºç®¡ç†å‘˜
python scripts/create_admin.py promote <username>
```

## ğŸ—‚ï¸ è„šæœ¬è¯´æ˜

### 1. `init_database.py` - å®Œæ•´æ•°æ®åº“åˆå§‹åŒ–

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
- å®‰è£…å¿…è¦æ‰©å±•
- åˆ›å»ºæ‰€æœ‰è¡¨ç»“æ„
- åˆ›å»ºç®¡ç†å‘˜è´¦å·
- å¯é€‰åˆ›å»ºç¤ºä¾‹æ•°æ®

**é€‚ç”¨åœºæ™¯ï¼š**
- é¦–æ¬¡éƒ¨ç½²ç³»ç»Ÿ
- å¼€å‘ç¯å¢ƒæ­å»º
- æµ‹è¯•ç¯å¢ƒé‡ç½®

### 2. `create_admin.py` - ç®¡ç†å‘˜è´¦å·ç®¡ç†

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- åˆ›å»ºæ–°ç®¡ç†å‘˜è´¦å·
- ä¿®æ”¹ç”¨æˆ·å¯†ç 
- æå‡æ™®é€šç”¨æˆ·ä¸ºç®¡ç†å‘˜
- åˆ—å‡ºç°æœ‰ç®¡ç†å‘˜

**é€‚ç”¨åœºæ™¯ï¼š**
- æ·»åŠ æ–°ç®¡ç†å‘˜
- å¯†ç é‡ç½®
- ç”¨æˆ·æƒé™ç®¡ç†

### 3. `db_manager.py` - æ•°æ®åº“è¿ç§»ç®¡ç†

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- Alembic è¿ç§»ç®¡ç†
- æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶
- ç»“æ„å˜æ›´ç®¡ç†

**é€‚ç”¨åœºæ™¯ï¼š**
- æ•°æ®åº“ç»“æ„æ›´æ–°
- ç‰ˆæœ¬è¿ç§»
- å¼€å‘è¿‡ç¨‹ä¸­çš„ç»“æ„å˜æ›´

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šé¦–æ¬¡éƒ¨ç½²

```bash
# 1. ç¡®ä¿æ•°æ®åº“æœåŠ¡è¿è¡Œ
# 2. é…ç½® .env æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
# 3. è¿è¡Œåˆå§‹åŒ–
cd backend
python scripts/init_database.py init
```

### åœºæ™¯2ï¼šå¼€å‘ç¯å¢ƒé‡ç½®

```bash
# é‡ç½®æ•°æ®åº“ï¼ˆåˆ é™¤æ‰€æœ‰æ•°æ®å¹¶é‡æ–°åˆå§‹åŒ–ï¼‰
python scripts/init_database.py reset
```

### åœºæ™¯3ï¼šæ·»åŠ æ–°ç®¡ç†å‘˜

```bash
# äº¤äº’å¼åˆ›å»º
python scripts/create_admin.py create

# æˆ–è€…ç›´æ¥æŒ‡å®šå‚æ•°
python scripts/create_admin.py create-custom newadmin admin@company.com password123 "New Admin"
```

### åœºæ™¯4ï¼šå¿˜è®°ç®¡ç†å‘˜å¯†ç 

```bash
# é‡ç½®å¯†ç 
python scripts/create_admin.py change-password admin
```

## â“ å¸¸è§é—®é¢˜

### Q1: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯**: `ConnectionRefusedError`

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ PostgreSQL æœåŠ¡æ˜¯å¦è¿è¡Œ
2. éªŒè¯ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
3. ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿæƒé™

### Q2: æ‰©å±•å®‰è£…å¤±è´¥

**é”™è¯¯**: `extension "vector" does not exist`

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿å®‰è£…äº† pgvector æ‰©å±•
2. æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æ˜¯å¦æœ‰åˆ›å»ºæ‰©å±•çš„æƒé™

### Q3: ç®¡ç†å‘˜è´¦å·å·²å­˜åœ¨

**é”™è¯¯**: `User already exists`

**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åæˆ–é‚®ç®±
2. æˆ–è€…ä½¿ç”¨ `change-password` å‘½ä»¤é‡ç½®å¯†ç 

### Q4: æƒé™ä¸è¶³

**é”™è¯¯**: `permission denied`

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™
2. ç¡®ä¿ç”¨æˆ·å¯ä»¥åˆ›å»ºæ•°æ®åº“å’Œè¡¨

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **: ç”Ÿäº§ç¯å¢ƒä¸­åŠ¡å¿…ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
2. **ä½¿ç”¨å¼ºå¯†ç **: å¯†ç è‡³å°‘8ä½ï¼ŒåŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
3. **é™åˆ¶ç®¡ç†å‘˜æ•°é‡**: åªåˆ›å»ºå¿…è¦çš„ç®¡ç†å‘˜è´¦å·
4. **å®šæœŸæ›´æ–°å¯†ç **: å»ºè®®å®šæœŸæ›´æ¢ç®¡ç†å‘˜å¯†ç 

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹è„šæœ¬çš„è¯¦ç»†æ—¥å¿—è¾“å‡º
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
3. éªŒè¯ PostgreSQL æœåŠ¡çŠ¶æ€
4. æŸ¥çœ‹åº”ç”¨ç¨‹åºæ—¥å¿—æ–‡ä»¶

---

**æ³¨æ„**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿™äº›è„šæœ¬å‰ï¼Œè¯·ç¡®ä¿å·²ç»å¤‡ä»½äº†é‡è¦æ•°æ®ã€‚